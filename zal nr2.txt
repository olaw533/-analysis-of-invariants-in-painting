clc;
clear all;

for k = 1:1
  jpgFilename = sprintf('%d.jpg', k);
  fullFileName = fullfile('van Gogh', jpgFilename);
  if exist(fullFileName, 'file')
    imdata = imread(fullFileName );
  else
    warningMessage = sprintf('Warning: image file does not exist:\n%s', fullFileName);
    uiwait(warndlg(warningMessage));
  end
  
figure()
imshow(imdata);
imdata = rgb2gray(imdata);
  
% Transformata Falkowa
% Obliczanie detali i aproksymacji 

% transformata
poziom=3; %maksymalny poziom dekompozycji
falka='haar'; %rodzaj falki
[C,L] = wavedec2(imdata,poziom,falka); %dyskretna transformata falkowa

[H1, V1, D1] = detcoef2 ( 'all', C, L, poziom); 
A1 = appcoef2 (C, L, falka, poziom);
AAA = size(A1);
V1img = wcodemat(V1,255,'mat',poziom);
H1img = wcodemat(H1,255,'mat',poziom);
D1img = wcodemat(D1,255,'mat',poziom);
A1img = wcodemat(A1,255,'mat',poziom);

figure();
subplot(2,2,1)
imagesc(A1img)
colormap pink(255)
title('Approximation Coef. of Level 3')

subplot(2,2,2)
imagesc(H1img)
title('Horizontal Detail Coef. of Level 3')

subplot(2,2,3)
imagesc(V1img)
title('Vertical Detail Coef. of Level 3')

subplot(2,2,4)
imagesc(D1img)
title('Diagonal Detail Coef. of Level 3')


imdata = im2double(imdata);
imdata2 = imresize(imdata, [AAA(1) AAA(2)]);

A1img = imdata2 - A1img;
V1img = imdata2 - V1img;
H1img = imdata2 - H1img;
D1img = imdata2 - D1img;

figure();
subplot(2,2,1)
imagesc(A1img)
colormap pink(255)
title('Approximation')
subplot(2,2,2)
imagesc(H1img)
title('Horizontal Detail')
subplot(2,2,3)
imagesc(V1img)
title('Vertical Detail')
subplot(2,2,4)
imagesc(D1img)
title('Diagonal Detail')
 

end